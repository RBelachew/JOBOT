(()=>{"use strict";var e={607:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.initBrandViews=t.initBrandViewsWorker=t.workerWrapper=void 0,t.workerWrapper=function(){const e=self,t=e.origin||e.location.origin,r=`${t}/geb/events/brandview`;let n={},a={},i="",o="WEB";const s=e=>{const r=e.replace(/#.*$/,"").split(":"),a={page_url:`${t}${n.locationPath}`,referrer:i,viewChannel:o,viewType:r[0]};if(r.slice(1).forEach((e=>{const t=e.split("=");if(2===t.length){const e=t[0],r=t[1];switch(e){case"n":a.viewName=r;break;case"eid":a.employerId=r||null;break;case"jlid":a.job_listing_id=r||null;break;default:a[(e=>e.match(/[\s_]/g)?e:e.replace(/[A-Z]/g,(e=>`_${e.toLowerCase()}`)))(e)]=r||null}}})),!Object.prototype.hasOwnProperty.call(a,"viewName"))throw new Error(`Parse failed: "${e}" -- missing "n={name}"`);if(!Object.prototype.hasOwnProperty.call(a,"employerId"))throw new Error(`Parse failed: "${e}" -- missing "eid={employerId}"`);return a},d=new ReferenceError("CLONE_TEST"),c=(()=>{try{return e.postMessage(d),!0}catch(e){return!1}})(),l=t=>{!c&&t instanceof Error?e.postMessage(t.message):e.postMessage(t)},w=()=>{const i=[],o=[];if(Object.keys(a).forEach((e=>{if(a[e])try{i.push(s(e)),o.push(e)}catch(e){l(e)}})),i.length){const s=new XMLHttpRequest;s.open("POST",r),s.setRequestHeader("Content-Type","application/json"),s.setRequestHeader("x-gd-event-source","brandview"),s.setRequestHeader("x-gd-event-type","web"),s.onerror=()=>{l(new Error("Network request failed"))},s.onload=()=>{const r=t.indexOf("//localhost")>=0;if(s.status>=400&&!r)l(new Error(`Network request failed: ${s.status} -- ${s.responseText}`));else{e.postMessage({triggeredPending:o});const t=Object.keys(a).reduce(((e,t)=>(o.includes(t)?n[t]=a[t]:a[t]=a[t],e)),{tracked:{},pending:{}});Object.assign(n,t.tracked),a=t.pending}},s.send(JSON.stringify(i))}},u=function(e,t){let r;return function(...t){clearTimeout(r),r=setTimeout((()=>{r=null,e.apply(this,t)}),1e3)}}(w),p={intersectOn(e,t,r){if(n.locationPath!==e)w(),n={locationPath:e};else if(n[t])return;try{s(t)}catch(e){return l(e),void(n[t]=t)}i=r,a[t]=Date.now(),u()},intersectOff(e,t){n.locationPath!==e?(w(),n={locationPath:e}):Date.now()-a[t]<1e3&&delete a[t]},setChannel(e){e&&(o=e)},ping(t){e.postMessage(t)}};e.onmessage=e=>{try{const t=e.data[0];switch(e.data[0]){case"intersectOn":p.intersectOn(e.data[1],e.data[2],e.data[3]);break;case"intersectOff":p.intersectOff(e.data[1],e.data[2]);break;case"setChannel":p.setChannel(e.data[1]);break;case"ping":p.ping(e);break;default:l(new Error(`BrandViews worker: ${t} not defined`))}}catch(e){l(e)}}},t.initBrandViewsWorker=e=>{const r=new Worker(URL.createObjectURL(new Blob([`(${t.workerWrapper})()`],{type:"application/javascript; charset=utf-8"})));return r.onmessage=t=>{var r,n,a,i,o;if("CLONE_TEST"===(null===(r=null==t?void 0:t.data)||void 0===r?void 0:r.message))return;if(null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.triggeredPending)return void t.data.triggeredPending.forEach((t=>{const r=e.querySelector(`[data-brandviews='${t}']`);r&&(r.dataset.triggeredBrandview="")}));const s=null===(i=null===(a=window.GD)||void 0===a?void 0:a.page)||void 0===i?void 0:i.ENVIRONMENT;if(s&&!s.startsWith("prod"))throw t.data;if(window.Sentry){if(!(null===(o=null===window||void 0===window?void 0:window.Sentry)||void 0===o?void 0:o.instance))throw t.data;window.Sentry.instance.withScope((e=>{e.setLevel("error"),window.Sentry.instance.captureException(t.data)}))}},r};const r=new Set(["","undefined","null","false","0"]);t.initBrandViews=(e=document.body)=>{var n,a;if(window.GD=window.GD||{},window.GD.brandviewWorker)return;window.GD.brandviewWorker=(0,t.initBrandViewsWorker)(e);const i=window.GD.brandviewWorker,o=(null===(a=null===(n=window.GD)||void 0===n?void 0:n.page)||void 0===a?void 0:a.isWebviewNative)?"MOBILE":"WEB";i.postMessage(["setChannel",o]);const s=new IntersectionObserver((e=>{e.forEach((e=>{e.target.isConnected||s.unobserve(e.target);const t=e.target.dataset.brandviews;r.has(t)||(e.isIntersecting?i.postMessage(["intersectOn",window.location.pathname,t,document.referrer]):i.postMessage(["intersectOff",window.location.pathname,t]))}))}),{threshold:.5});let d;const c=t=>{d.disconnect(),setTimeout((()=>{t&&t.forEach((e=>{"data-brandviews"===e.attributeName&&(i.postMessage(["intersectOff",window.location.pathname,e.oldValue]),s.unobserve(e.target))})),e.querySelectorAll("[data-brandviews]").forEach((e=>{const t=e.dataset.brandviews;(null==t?void 0:t.startsWith("PAGE:"))?i.postMessage(["intersectOn",window.location.pathname,t,document.referrer]):s.observe(e)})),d.observe(e,{childList:!0,subtree:!0,attributeOldValue:!0,attributeFilter:["data-brandviews"]})}),300)};d=new MutationObserver(c),c()}}},t={};(0,function r(n){var a=t[n];if(void 0!==a)return a.exports;var i=t[n]={exports:{}};return e[n](i,i.exports,r),i.exports}(607).initBrandViews)()})();