var Optimizely_RS=function(e){"use strict";function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r(n.key),n)}}function i(e,t,i){return(t=r(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var n,a=4,o=function(e){switch(e.toUpperCase()){case"INFO":a=1;break;case"DEBUG":a=2;break;case"WARN":a=3;break;default:a=4}},s=function(){var e;a<=2&&(e=console).log.apply(e,arguments)},p="OPTIMIZELY";i(n={},p,p),i(n,"Optimizely",p),i(n,"optimizely",p);var c=function(){function e(t,i,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.referrerOverride=function(e){if(e)return window.optimizelyEffectiveReferrer=e,e},this.sendDataToRudder=function(e){s(e);var t=e.experiment,i=e.variation,r={integrations:{All:!0}},a=e.audiences,o={};a.forEach((function(e){o[e.id]=e.name}));var p=Object.keys(o).sort().join(),c=Object.values(o).sort().join(", ");if(n.sendExperimentTrack){var m={campaignName:e.campaignName,campaignId:e.id,experimentId:t.id,experimentName:t.name,variationName:i.name,variationId:i.id,audienceId:p,audienceName:c,isInCampaignHoldback:e.isInCampaignHoldback};if(t.referrer&&(m.referrer=t.referrer,r.page={referrer:t.referrer}),n.sendExperimentTrackAsNonInteractive&&(m.nonInteraction=1),e&&n.customCampaignProperties.length>0)for(var d=0;d<n.customCampaignProperties.length;d+=1){var l=n.customCampaignProperties[d].from,u=n.customCampaignProperties[d].to;void 0!==m[u]&&(m[l]=m[u],delete m[u])}n.analytics.track("Experiment Viewed",m,r)}if(n.sendExperimentIdentify){var f={};f["Experiment: ".concat(t.name)]=i.name,n.analytics.identify(f)}},i.logLevel&&o(i.logLevel),this.analytics=i,this.sendExperimentTrack=t.sendExperimentTrack,this.sendExperimentIdentify=t.sendExperimentIdentify,this.sendExperimentTrackAsNonInteractive=t.sendExperimentTrackAsNonInteractive,this.revenueOnlyOnOrderCompleted=t.revenueOnlyOnOrderCompleted,this.trackCategorizedPages=t.trackCategorizedPages,this.trackNamedPages=t.trackNamedPages,this.customCampaignProperties=t.customCampaignProperties?t.customCampaignProperties:[],this.customExperimentProperties=t.customExperimentProperties?t.customExperimentProperties:[],this.name=p,this.areTransformationsConnected=r&&r.areTransformationsConnected,this.destinationId=r&&r.destinationId}var i,r,n;return i=e,(r=[{key:"init",value:function(){s("=== in optimizely init ==="),this.initOptimizelyIntegration(this.referrerOverride,this.sendDataToRudder)}},{key:"initOptimizelyIntegration",value:function(e,t){var i=function(e,i){var r=window.optimizely.get&&window.optimizely.get("state");if(r){var n=r.getCampaignStates({isActive:!0})[e];i&&(n.experiment.referrer=i),t(n)}},r=function(){var t=window.optimizely.get&&window.optimizely.get("state");if(t){var i=t.getRedirectInfo()&&t.getRedirectInfo().referrer;if(i)return e(i),i}};!function(){window.optimizely=window.optimizely||[];var e=window.optimizely.get&&window.optimizely.get("state");if(e){var t=r(),n=e.getCampaignStates({isActive:!0});Object.keys(n).forEach((function(e){t?i(e,t):i(e)}))}else window.optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"initialized"},handler:function(){r()}})}(),window.optimizely=window.optimizely||[],window.optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:function(e){var t=e.data.campaign.id;i(t)}})}},{key:"track",value:function(e){s("in Optimizely web track");var t=e.message.properties,i=e.message.event;t.revenue&&this.revenueOnlyOnOrderCompleted&&("Order Completed"===i?t.revenue=Math.round(100*t.revenue):"Order Completed"!==i&&delete t.revenue);var r={type:"event",eventName:i.replace(/:/g,"_"),tags:t};window.optimizely.push(r)}},{key:"page",value:function(e){s("in Optimizely web page");var t=e.message.properties.category,i=e.message.name;t&&this.trackCategorizedPages&&(e.message.event="Viewed ".concat(t," page"),e.message.type="track",this.track(e)),i&&this.trackNamedPages&&(e.message.event="Viewed ".concat(i," page"),e.message.type="track",this.track(e))}},{key:"isLoaded",value:function(){return!(!window.optimizely||window.optimizely.push===Array.prototype.push)}},{key:"isReady",value:function(){return!(!window.optimizely||window.optimizely.push===Array.prototype.push)}}])&&t(i.prototype,r),n&&t(i,n),Object.defineProperty(i,"prototype",{writable:!1}),e}();return e.Optimizely=c,Object.defineProperty(e,"__esModule",{value:!0}),e}({});
//# sourceMappingURL=Optimizely.min.js.map
